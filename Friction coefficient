%%ACHIEVING PERISTALTIC MOTION

%INPUTTING PARAMATERS 

%m_pam = input ("Enter the weight of one PAM (g)?");
m_pam_grams = 17;
m_pam = 0.001*m_pam_grams;
%m_plate = input ("Enter the mass of one segment plate (g)?");
m_plate_grams = 110;
m_plate = 0.001*m_plate_grams;
%m_end = input ("Enter the mass of one end plate (g)?");
m_end_grams = 110;
m_end = 0.001*m_end_grams;
%mass of module/segment - FIX TERMINOLOGY 
m_seg=3*m_pam;


%FOR A REASONABLE GENERATED FORCE VALUE
%Let the generated segment force be 0.4
Force_PAM=0.4;
Force_segment = Force_PAM*3;

%Calculate maximum coeffcient of friction at plates, u_plate_min

%Maximum restrictive friction force <= Force_segment
%Maximum restrictive friction force = u_plate_max * ((3 *(m_plate + (m_seg))*9.8) + (m_end*9.8));

u_plate_max = (Force_segment)/(    (2*(m_seg+m_plate)+((m_seg/2) +m_plate))*9.8     )

%Calculate the minimum coefficient of friction at PAMS, u_PAM_max

%Minimum anchoring force >= Force_segment
%Force_anchor = u * (m_plate * (m_seg)) * 9.8;

u_pam_min = Force_segment/( (m_plate + m_seg) * 9.8)


%CACULATING MAXIMUM FORCE when u_plate_max & u_pam_min are both <1
u_pam_min=1;
Force_segment_max = u_pam_min *( (m_plate + m_seg) * 9.8)

Force_PAM_max=Force_segment_max/3



%FOR A RANGE OF FORCES
%Plotting u_plate_max and u_pam_min

Force_PAM=0:01:1;
Force_segment = Force_PAM.*3;

u_plate_max = (Force_segment)./(    (2*(m_seg+m_plate)+((m_seg/2) +m_plate))*9.8     );
u_pam_min = Force_segment./( (m_plate + m_seg) * 9.8);

plot (Force_PAM, u_plate_max)
hold on
plot (Force_PAM, u_pam_min)
hold on
plot ([0,Force_PAM_max], [1,1],'--black')
hold on
plot ([Force_PAM_max,Force_PAM_max], [0,1],'--black')
hold off

xlabel('Force Generated by One PAM (N)')
ylabel('Static Coefficient of Friction')
title('Friction Coefficients for Achieving Persitaltic Motion')
legend('Maximum Friction Coefficient at Segment Plates','Minimum Friction Coefficient at PAMs')
